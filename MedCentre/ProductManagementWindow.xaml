<Window x:Class="MedCentre.ProductManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление товарами" Height="600" Width="900"
        Background="{StaticResource SecondaryBackgroundBrush}"
        FontFamily="Poppins">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Управление товарами" Style="{StaticResource HeaderTextBlockStyle}"/>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,10,0,10">
            <Button Content="Добавить товар" Click="AddProduct_Click" Margin="0,0,10,0"/>
        </StackPanel>

        <ListView Grid.Row="2" x:Name="ProductsListView" ItemsSource="{Binding Products}"
                  HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Редактировать" Click="EditProduct_Click"/>
                </ContextMenu>
            </ListView.ContextMenu>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="Black" BorderThickness="2" Margin="5" Padding="10">
                        <Grid Height="120">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0" BorderBrush="Black" BorderThickness="2" Margin="0,0,15,0">
                                <Grid>
                                    <Rectangle Fill="White"/>
                                    <Image Source="{Binding Image}" Stretch="Uniform" Margin="5"/>
                                </Grid>
                            </Border>
                            
                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="0,0,15,0">
                                <TextBlock Text="{Binding ProductName}" FontSize="12" Margin="0,0,0,8"/>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                    <TextBlock Text="Поставщик:" FontWeight="Bold" FontSize="12" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Supplier.Name}" FontSize="12"/>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                    <TextBlock Text="Бренд:" FontWeight="Bold" FontSize="12" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Brand}" FontSize="12"/>
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Цена:" FontWeight="Bold" FontSize="12" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Price, StringFormat='{}{0:N2} руб.'}" FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                <TextBlock Text="Наличие на складе:" FontWeight="Bold" FontSize="12" 
                                         HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                <TextBlock Text="{Binding Quantity, StringFormat='{}{0} шт.'}" 
                                         FontSize="12" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window>